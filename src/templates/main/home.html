{% extends 'base.html' %} {% load humanize %} {% load static %} {% load
currency_tags %} {% block title %}Home{% endblock %} {% block content %}

<!-- Hero Carousel -->
<div class="container-fluid px-0">
  <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide-to="0"
        class="active"
      ></button>
      <button
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide-to="1"
      ></button>
      <button
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide-to="2"
      ></button>
      <button
        type="button"
        data-bs-target="#heroCarousel"
        data-bs-slide-to="3"
      ></button>
    </div>

    <div class="carousel-inner">
      <div class="carousel-item active">
        <img
          src="{% static 'assets/images/banner-2.png' %}"
          class="d-block w-100"
          alt="Fashion Sale"
          style="max-height: 500px; object-fit: cover"
        />
        <div
          class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 p-4 rounded"
        >
          <p class="text-uppercase text-white-50 mb-2">Trending Item</p>
          <h2 class="display-4 fw-bold">Fashion Sale</h2>
          <p class="fs-5 mb-3">Starting at $200</p>
          <a href="#" class="btn btn-success btn-lg px-5">Shop Now</a>
        </div>
      </div>

      <div class="carousel-item">
        <img
          src="{% static 'assets/images/banner-1.jpg' %}"
          class="d-block w-100"
          alt="Sunglasses"
          style="max-height: 500px; object-fit: cover"
        />
        <div
          class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 p-4 rounded"
        >
          <h2 class="display-4 fw-bold">Modern Sunglasses</h2>
          <p class="fs-5 mb-3">Starting at $150</p>
          <a href="#" class="btn btn-success btn-lg px-5">Shop Now</a>
        </div>
      </div>

      <div class="carousel-item">
        <img
          src="{% static 'assets/images/banner-2.png' %}"
          class="d-block w-100"
          alt="Summer Sale"
          style="max-height: 500px; object-fit: cover"
        />
        <div
          class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 p-4 rounded"
        >
          <p class="text-uppercase text-white-50 mb-2">Sale Offer</p>
          <h2 class="display-4 fw-bold">New Fashion Summer Sale</h2>
          <p class="fs-5 mb-3">Starting at 20</p>
          <a href="#" class="btn btn-success btn-lg px-5">Shop Now</a>
        </div>
      </div>

      <div class="carousel-item">
        <img
          src="{% static 'assets/images/banner-1.jpg' %}"
          class="d-block w-100"
          alt="Summer Collection"
          style="max-height: 500px; object-fit: cover"
        />
        <div
          class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 p-4 rounded"
        >
          <p class="text-uppercase text-white-50 mb-2">Sale Offer</p>
          <h2 class="display-4 fw-bold">New Fashion Summer Sale</h2>
          <p class="fs-5 mb-3">Starting at $200</p>
          <a href="#" class="btn btn-success btn-lg px-5">Shop Now</a>
        </div>
      </div>
    </div>

    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#heroCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#heroCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
</div>

<!-- Categories Section -->
<div class="container my-5">
  <h2 class="text-center mb-4 fw-bold">Shop By Category</h2>
  <div class="row g-3">
    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/bags.svg' %}"
            alt="Bags"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Bags</h5>
          <p class="text-muted small mb-2">(53)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/sweater.svg' %}"
            alt="Winter Wear"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Winter Wear</h5>
          <p class="text-muted small mb-2">(58)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/glasses.svg' %}"
            alt="Glasses"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Glasses & Lens</h5>
          <p class="text-muted small mb-2">(68)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/accessories.svg' %}"
            alt="Shorts"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Accessories</h5>
          <p class="text-muted small mb-2">(84)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/tees.svg' %}"
            alt="T-Shirts"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">T-Shirts</h5>
          <p class="text-muted small mb-2">(35)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/tops.svg' %}"
            alt="Tops"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Tan Tops</h5>
          <p class="text-muted small mb-2">(16)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/trouser.svg' %}"
            alt="Trousers"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Trousers</h5>
          <p class="text-muted small mb-2">(27)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4 col-lg-3">
      <div class="card border-0 text-center h-100">
        <div
          class="card-body d-flex flex-column align-items-center justify-content-center"
          style="background-color: #f5f5f5; border-radius: 10px"
        >
          <img
            src="{% static 'assets/images/belts.svg' %}"
            alt="Belts"
            width="50"
            class="mb-3"
          />
          <h5 class="card-title mb-1">Belts</h5>
          <p class="text-muted small mb-2">(39)</p>
          <a href="#" class="btn btn-sm btn-outline-success">Show All</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Products Section -->
<div class="container my-5">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-lg-3 mb-4">
      <div class="card border-0" style="background-color: #f5f5f5">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">Categories</h5>
        </div>
        <div class="card-body p-0">
          <div class="accordion accordion-flush" id="categoryAccordion">
            {% for category in categories %}
            <div class="accordion-item bg-transparent border-0">
              <h2 class="accordion-header">
                <button
                  class="accordion-button collapsed bg-transparent"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#category{{ forloop.counter }}"
                >
                  <img
                    src="{% static 'assets/images/tags.svg' %}"
                    alt="{{ category.name }}"
                    width="20"
                    class="me-2"
                  />
                  {{ category.name }}
                </button>
              </h2>
              <div
                id="category{{ forloop.counter }}"
                class="accordion-collapse collapse"
                data-bs-parent="#categoryAccordion"
              >
                <div class="accordion-body">
                  <ul class="list-unstyled mb-0">
                    {% for product in category.products.all|slice:":4" %}
                    <li class="mb-2">
                      <a
                        href="/product/{{ product.id }}/"
                        class="text-decoration-none text-dark small"
                      >
                        {{ product.name|truncatechars:20 }}
                      </a>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="col-lg-9">
      <!-- New Arrivals & Trending -->
      <div class="row mb-5">
        <div class="col-md-6 mb-4">
          <h3 class="mb-3 fw-bold">New Arrivals</h3>
          <div class="row g-3">
            {% for product in products|slice:":4" %}
            <div class="col-12">
              <div class="card border-0" style="background-color: #f5f5f5">
                <div class="card-body">
                  <div class="d-flex">
                    <a href="/product/{{ product.id }}/" class="me-3">
                      {% if product.cloudinary_url %}
                      <img
                        src="{{ product.cloudinary_url }}"
                        alt="{{ product.name }}"
                        style="
                          width: 80px;
                          height: 80px;
                          object-fit: cover;
                          border-radius: 8px;
                        "
                      />
                      {% elif product.image %}
                      <img
                        src="{{ product.image.url }}"
                        alt="{{ product.name }}"
                        style="
                          width: 80px;
                          height: 80px;
                          object-fit: cover;
                          border-radius: 8px;
                        "
                      />
                      {% else %}
                      <div
                        style="
                          width: 80px;
                          height: 80px;
                          background-color: #e0e0e0;
                          border-radius: 8px;
                          display: flex;
                          align-items: center;
                          justify-content: center;
                        "
                      >
                        <ion-icon name="image-outline"></ion-icon>
                      </div>
                      {% endif %}
                    </a>
                    <div class="flex-grow-1">
                      <a
                        href="/product/{{ product.id }}/"
                        class="text-decoration-none text-dark"
                      >
                        <h6 class="mb-1">
                          {{ product.name|truncatechars:35 }}
                        </h6>
                      </a>
                      <p class="text-muted small mb-2">
                        {{ product.category.name }}
                      </p>
                      <div>
                        {% if product.has_discount %}
                        <span class="fw-bold text-success"
                          >{{ product.converted_price }}</span
                        >
                        <del class="text-muted small ms-2"
                          >{{ product.converted_original_price }}</del
                        >
                        {% else %}
                        <span class="fw-bold text-success"
                          >{{ product.converted_price }}</span
                        >
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>

        <div class="col-md-6 mb-4">
          <h3 class="mb-3 fw-bold">Trending</h3>
          <div class="row g-3">
            {% for product in products|slice:":4" %}
            <div class="col-12">
              <div class="card border-0" style="background-color: #f5f5f5">
                <div class="card-body">
                  <div class="d-flex">
                    <a href="/product/{{ product.id }}/" class="me-3">
                      {% if product.cloudinary_url %}
                      <img
                        src="{{ product.cloudinary_url }}"
                        alt="{{ product.name }}"
                        style="
                          width: 80px;
                          height: 80px;
                          object-fit: cover;
                          border-radius: 8px;
                        "
                      />
                      {% elif product.image %}
                      <img
                        src="{{ product.image.url }}"
                        alt="{{ product.name }}"
                        style="
                          width: 80px;
                          height: 80px;
                          object-fit: cover;
                          border-radius: 8px;
                        "
                      />
                      {% else %}
                      <div
                        style="
                          width: 80px;
                          height: 80px;
                          background-color: #e0e0e0;
                          border-radius: 8px;
                          display: flex;
                          align-items: center;
                          justify-content: center;
                        "
                      >
                        <ion-icon name="image-outline"></ion-icon>
                      </div>
                      {% endif %}
                    </a>
                    <div class="flex-grow-1">
                      <a
                        href="/product/{{ product.id }}/"
                        class="text-decoration-none text-dark"
                      >
                        <h6 class="mb-1">
                          {{ product.name|truncatechars:35 }}
                        </h6>
                      </a>
                      <p class="text-muted small mb-2">
                        {{ product.category.name }}
                      </p>
                      <div>
                        {% if product.has_discount %}
                        <span class="fw-bold text-success"
                          >{{ product.converted_price }}</span
                        >
                        <del class="text-muted small ms-2"
                          >{{ product.converted_original_price }}</del
                        >
                        {% else %}
                        <span class="fw-bold text-success"
                          >{{ product.converted_price }}</span
                        >
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Deal of the Day -->
      <div class="mb-5">
        <h3 class="mb-3 fw-bold">Deal of the Day</h3>
        <div class="row">
          {% for product in products|slice:":2" %}
            <div class="col-md-6 mb-4">
            <div class="card border-0 h-100">
              <div class="position-relative">
              {% if product.cloudinary_url %}
              <img
                src="{{ product.cloudinary_url }}"
                alt="{{ product.name }}"
                class="card-img-top"
                style="height: 300px; object-fit: cover"
              />
              {% elif product.image %}
              <img
                src="{{ product.image.url }}"
                alt="{{ product.name }}"
                class="card-img-top"
                style="height: 300px; object-fit: cover"
              />
              {% else %}
              <div
                style="
                height: 300px;
                background-color: #f0f0f0;
                display: flex;
                align-items: center;
                justify-content: center;
                "
              >
                <ion-icon
                name="image-outline"
                style="font-size: 48px"
                ></ion-icon>
              </div>
              {% endif %}
              {% if product.has_discount %}
              <span class="position-absolute top-0 start-0 badge bg-danger m-2">
                {{ product.discount_percentage|default:"0" }}%
              </span>
              {% endif %}
              </div>
              <div class="card-body">
              <div class="mb-2">
                {% for i in "12345" %}
                {% if forloop.counter <= product.rating|default:3 %}
                  <ion-icon name="star" class="text-warning"></ion-icon>
                {% else %}
                  <ion-icon name="star-outline" class="text-warning"></ion-icon>
                {% endif %}
                {% endfor %}
              </div>
              <h5 class="card-title">
                <a
                href="/product/{{ product.id }}/"
                class="text-decoration-none text-dark"
                >{{ product.name }}</a
                >
              </h5>
              <p class="card-text text-muted small">
                {{ product.description|truncatechars:100 }}
              </p>
              <div class="mb-3">
                <span class="h4 text-success fw-bold"
                >{{ product.converted_price }}</span
                >
                {% if product.has_discount %}
                <del class="text-muted ms-2"
                >{{ product.converted_original_price }}</del
                >
                {% endif %}
              </div>
              <button class="btn btn-success w-100 mb-3" onclick="addToCartAjax({{ product.id }})">Add to Cart</button>

              <div class="mb-3">
                <div
                class="d-flex justify-content-between text-muted small mb-2"
                >
                <span>
                  Already Sold:
                  <strong>{{ product.total_sold|default:"0" }}</strong>
                </span>
                <span>
                  Available: <strong>{{ product.stock|default:"0" }}</strong>
                </span>
                </div>
                {% with total=product.total_sold|add:product.stock %}
                {% if total > 0 %}
                {% widthratio product.total_sold total 100 as sold_percent %}
                <div class="progress" style="height: 8px">
                <div
                  class="progress-bar bg-success"
                  style="width: {{ sold_percent }}%"
                ></div>
                </div>
                {% else %}
                <div class="progress" style="height: 8px">
                <div
                  class="progress-bar bg-success"
                  style="width: 0%"
                ></div>
                </div>
                {% endif %}
                {% endwith %}
              </div>

              {% if product.deal_end %}
              <div class="alert alert-success border-0 text-center">
                <p class="small mb-2 fw-bold">Hurry Up! Offer ends in:</p>
                <div class="d-flex justify-content-center gap-2" data-deal-end="{{ product.deal_end|date:'c' }}">
                <div class="text-center">
                  <div class="fw-bold deal-days">--</div>
                  <div class="small">Days</div>
                </div>
                <div class="text-center">
                  <div class="fw-bold deal-hours">--</div>
                  <div class="small">Hours</div>
                </div>
                <div class="text-center">
                  <div class="fw-bold deal-minutes">--</div>
                  <div class="small">Min</div>
                </div>
                <div class="text-center">
                  <div class="fw-bold deal-seconds">--</div>
                  <div class="small">Sec</div>
                </div>
                </div>
              </div>
              {% endif %}
              </div>
            </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Product Grid -->
      <div>
        <h3 class="mb-4 fw-bold">All Products</h3>
        <div class="row g-4">
          {% for product in products %}
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card border-0 h-100 position-relative">
              <div
                class="position-relative overflow-hidden"
                style="border-radius: 8px 8px 0 0"
              >
                {% if product.cloudinary_url %}
                <img
                  src="{{ product.cloudinary_url }}"
                  alt="{{ product.name }}"
                  class="card-img-top"
                  style="height: 250px; object-fit: cover"
                />
                {% elif product.image %}
                <img
                  src="{{ product.image.url }}"
                  alt="{{ product.name }}"
                  class="card-img-top"
                  style="height: 250px; object-fit: cover"
                />
                {% else %}
                <div
                  style="
                    height: 250px;
                    background-color: #f0f0f0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                >
                  <ion-icon
                    name="image-outline"
                    style="font-size: 48px"
                  ></ion-icon>
                </div>
                {% endif %} {% if product.has_discount %}
                <span
                  class="position-absolute top-0 start-0 badge bg-danger m-2"
                  >{{ product.discount_percentage|default:"0" }}%</span
                >
                {% elif product.is_featured %}
                <span
                  class="position-absolute top-0 start-0 badge bg-success m-2"
                  >New</span
                >
                {% endif %}

                <div class="position-absolute top-0 end-0 m-2">
                  <button
                    class="btn btn-sm btn-light rounded-circle mb-1"
                    style="width: 35px; height: 35px"
                  >
                    <ion-icon name="heart-outline"></ion-icon>
                  </button>
                  <button
                    class="btn btn-sm btn-light rounded-circle mb-1"
                    style="width: 35px; height: 35px"
                  >
                    <ion-icon name="eye-outline"></ion-icon>
                  </button>
                  <button
                    class="btn btn-sm btn-light rounded-circle"
                    style="width: 35px; height: 35px"
                    onclick="addToCartAjax({{ product.id }})"
                    title="Add to Cart"
                  >
                    <ion-icon name="bag-add-outline"></ion-icon>
                  </button>
                </div>
              </div>

              <div class="card-body">
                <p class="text-success small mb-1">
                  {{ product.category.name }}
                </p>
                <h6 class="card-title mb-2">
                  <a
                    href="/product/{{ product.id }}/"
                    class="text-decoration-none text-dark"
                    >{{ product.name|truncatechars:30 }}</a
                  >
                </h6>
                <div class="mb-2">
                  <ion-icon name="star" class="text-warning small"></ion-icon>
                  <ion-icon name="star" class="text-warning small"></ion-icon>
                  <ion-icon name="star" class="text-warning small"></ion-icon>
                  <ion-icon
                    name="star-outline"
                    class="text-warning small"
                  ></ion-icon>
                  <ion-icon
                    name="star-outline"
                    class="text-warning small"
                  ></ion-icon>
                </div>
                <div>
                  <span class="fw-bold text-success"
                    >{{ product.converted_price }}</span
                  >
                  {% if product.has_discount %}
                  <del class="text-muted small ms-1"
                    >{{ product.converted_original_price }}</del
                  >
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .btn-success {
    background-color: #2e6e1f;
    border-color: #2e6e1f;
  }

  .btn-success:hover {
    background-color: #1a4012;
    border-color: #1a4012;
  }

  .btn-outline-success {
    color: #2e6e1f;
    border-color: #2e6e1f;
  }

  .btn-outline-success:hover {
    background-color: #2e6e1f;
    border-color: #2e6e1f;
    color: white;
  }

  .text-success {
    color: #2e6e1f !important;
  }

  .bg-success {
    background-color: #2e6e1f !important;
  }

  .progress-bar.bg-success {
    background-color: #2e6e1f !important;
  }

  .alert-success {
    background-color: #f0f8f0;
    border-color: #2e6e1f;
    color: #1a4012;
  }

  .carousel-indicators button {
    background-color: #2e6e1f;
  }
</style>

<script>
  function addToCartAjax(productId) {
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]')?.value ||
                      document.querySelector('[name="csrfmiddlewaretoken"]')?.value ||
                      getCookie('csrftoken');

    const formData = new FormData();
    formData.append('quantity', 1);

    fetch(`/cart/ajax/add/${productId}/`, {
      method: 'POST',
      headers: {
        'X-CSRFToken': csrfToken,
      },
      body: formData,
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // Show success message
        showNotification(data.message, 'success');
        // Update cart count if there's a cart count element
        const cartCountEl = document.getElementById('cart-count');
        if (cartCountEl) {
          cartCountEl.textContent = data.cart_count;
        }
      } else {
        showNotification(data.message, 'error');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      showNotification('Failed to add to cart', 'error');
    });
  }

  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }

  function showNotification(message, type = 'info') {
    // Create a simple notification
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show`;
    alertDiv.setAttribute('role', 'alert');
    alertDiv.innerHTML = `
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;
    
    // Insert at the top of the page
    const container = document.querySelector('.container:first-of-type') || document.body;
    container.insertBefore(alertDiv, container.firstChild);
    
    // Auto-dismiss after 5 seconds
    setTimeout(() => {
      alertDiv.remove();
    }, 5000);
  }
</script>

{% endblock %} {% block footer %}{% endblock %}
